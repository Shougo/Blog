---
title: "スニペットプラグインについて 2020 年版"
emoji: "✨"
type: "tech"
topics: ["vim", "neovim", "プラグイン", "スニペット"]
published: false
---

[2020秋 Vim のファイラー系プラグイン比較](https://zenn.dev/lambdalisue/articles/3deb92360546d526381f) に代表されるように、最近プラグインの比較というのがブームになっているようだ。


## はじめに

最近、スニペットプラグインを開発中なのでその過程で既存のスニペットプラグインの
調査を行っていた。その成果を皆にも紹介しようかと思う。


## スニペットプラグインとは

プラグインを紹介する前に、スニペットプラグインとは何なのかというのが分からない
人のために簡単に説明する。スニペットプラグインはよく使う文章を定型文(スニペッ
ト)として登録し、自由に挿入できる入力補助のためのプラグインのことである。
スニペットプラグインを呼び出すためには、ショートカット(スニペットトリガー)を覚
えなくてはいけない。スニペットトリガーを覚えるのは手間なので、自動補完プラグイ
ンを組み合わせてスニペットトリガーを補完してしまうのが個人的に推奨される。

スニペットプラグインに良く似たプラグインとしてテンプレート展開プラグインや、
[emmet](https://emmet.io/)というのも存在する。
テンプレート展開は主に新規ファイルを作成したときに自動で雛形を作成してくれるも
のである。
emmet は html タグを簡潔に記述されるためのもので、 Web 開発で良く使用される。
スニペットプラグインでも似たようなことができるものの、スニペットプラグインのほ
うがより汎用性が高いので、専用プラグインには使い勝手が劣る。


## スニペット用語について

ここではスニペットプラグインを使う上でよく出てくる基本的な機能や用語について簡
単に解説する。


### スニペットトリガー

スニペットトリガーとは、スニペットを展開するためのショートカットキーにあたるも
のである。


### タブストップ


### ミラー

ミラーは

ミラーの応用として、ユーザーの入力を変換して展開する機能をサポートしているスニ
ペットプラグインも存在する。


## スニペットプラグイン詳細

ここからは代表的なスニペットプラグインについて解説していく。スニペットプラグイ
ンにはそれぞれ利点と欠点があり、完璧なものは存在しない。 この記事があなたのスニ
ペットプラグイン選択の一助となれば幸いだ。


### [SnipMate](https://github.com/garbas/vim-snipmate)

もはや古典となりつつあるスニペットプラグインである。基本的な機能は揃っており、
不自由を感じることは少ないのではないだろうか。欠点としては開発がそれほど活発で
はないこと、他のスニペットプラグインと比較すると機能的に物足りないと感じるかも
しれない。

利点

* 安定している

* 必要十分な機能

欠点

* 開発は停滞


### [neosnippet.vim](https://github.com/Shougo/neosnippet.vim/)

私が開発しているスニペットプラグインであり、neo シリーズの一つ。
実はかなり歴史が古いプラグインで、SnipMate を見て開発された。
欠点としては、マーカー式であるが故に
現在 neosnippet の開発は終了しており、deoppet.nvim を開発中だ。

利点

* SnipMate のスニペットファイルを読み込むことが可能

* 依存関係がない

* 安定している

* 補完プラグインとの連携

欠点

* マーカー, conceal を使用しているが故の副作用

* 巨大なスニペットを読み込むと遅い

* 開発終了


### [vim-vsnip](https://github.com/hrsh7th/vim-vsnip)

VSCode のスニペットとの互換性を重視して設計されたスニペットプラグインである。
Vim script のみで実装されているが故に依存性はない。

利点

* VSCode のスニペットとの互換性

* LSP との高い互換性

* 依存性がない

欠点

* スニペット形式が JSON のみ、編集しづらい

* 他のプラグインと比較するとサポートしている機能は少ない



### [UltiSnips](https://github.com/SirVer/ultisnips)

名実共に最強のスニペットプラグインであり、この機能に完全に対抗できるプラグイン
は現状存在しない。国内外での人気も高く、スニペットプラグインといえばこれという
存在である。
Python interpolation という独自の機能を持っている。これはスニペット展開の挙動を
Python スクリプトで制御できるというものであり、他のスニペットプラグインとは比較
にならないほど自由度が高い。
SnipMate ほどではないが最近の開発は停滞気味である。
高機能であるがゆえに他のプラグインと干渉がしやすい、

利点

* 高機能

* スニペット記述の自由度の高さ

* Python interpolation のサポート

欠点

* Python への依存

* 開発は停滞

* neovim では遅い

* 他のプラグインや設定との干渉


### [coc-snippets](https://github.com/neoclide/coc-snippets)

coc フレームワークで構築されたスニペットプラグイン。
UltiSnips, SnipMate 両方の形式をパースすることができ、一見すると最強に見えるス
ニペットプラグインであるが、もちろんそんなことはない。
UltiSnips の機能が多すぎるので全ての機能に対応できないのだ。issues を見ている
と、UltiSnips に対する非互換性に対する苦情の数々が見える。

利点

* SnipMate, UltiSnips 両方のスニペットファイルを読み込むことが可能

* coc フレームワークの他のプラグインとの親和性が高い

欠点

* coc フレームワークへの依存

* UltiSnips との互換性は完璧ではない


### [snippet.nvim](https://github.com/norcalli/snippets.nvim)

neovim 用のスニペットプラグインとして期待されている。Lua で記述されている。

利点

* neovim なら依存関係なしに導入可能

* シンプルな機能

欠点

* 独自のスニペットフォーマット

* neovim への依存

* 設定は Lua 形式


### [deoppet.nvim](https://github.com/Shougo/deoppet.nvim)

neosnippet.vim の後継となるプラグインであり、UltiSnips を越えるスニペットプラグ
インを目指して開発中となっているスニペットプラグインである。
長らく実装が何もない vaporware だったが、その状態でなぜか 100stars 越えを達成す
るという謎の記録を残していた。
現在基本的な動作は実装済みで、ようやくスニペットプラグインとして使えるレベルに
なった。

利点

* neosnippet.vim の欠点を解消

* 高速な動作

欠点

* まだ開発中で人に推奨できるレベルの完成度ではない

* Python への依存

* 最新版の neovim への依存、今後 Vim8 への対応予定


## まとめ

deoppet.nvim に期待せよ、クックック……。
